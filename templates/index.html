<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sensor Data</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <style>
        body { padding: 20px; }
        .dashboard { margin-top: 20px; }
        .card { margin-bottom: 20px; }
        .card-header { background-color: #007bff; color: white; }
        .card-body { background-color: #f8f9fa; }
        .controls { margin-bottom: 20px; }
    </style>
</head>
<body>
    <h1 class="text-center mb-4">Sensor Dashboard</h1>

    <div class="card">
        <div class="card-header">Live Stream</div>

        <iframe id="webcamStream" width="700" height="500" src="http://192.168.2.163:8080"></iframe> 
    </div>

    <div class="controls">
        <input id="timespan" type="number" value="120" class="form-control" placeholder="Enter timespan in seconds" style="width: auto; display: inline-block;">
        <button onclick="updateTimespan()" class="btn btn-primary">Update Timespan</button>
    </div>

    <div class="card">
        <div class="card-header">Fan Control</div>
        <div class="card-body">
            <h5>Fan Speed</h5>
            <input type="range" id="fan-speed" min="0" max="100" value="50" class="form-range" onchange="setFanSpeed(this.value)">
            <p>Current Fan Speed: <span id="current-fan-speed">50</span>%</p>
        </div>
    </div>



    <div class="card">
        <div class="card-header">Light Control Dashboard</div>
        <div class="card-body">
            Current time: <span id="current-time"></span><br>
            Time until light turns on again: <span id="time-until-on"></span><br>
            Set Light On Time: <input type="time" id="light-on-time" class="form-control" style="width: auto; display: inline-block;">
            Set Light Off Time: <input type="time" id="light-off-time" class="form-control" style="width: auto; display: inline-block;">
            <button onclick="setLightTimes()" class="btn btn-info">Save Times</button><br>
            <button onclick="toggleLight(true)" class="btn btn-success">Turn Light ON</button>
            <button onclick="toggleLight(false)" class="btn btn-danger">Turn Light OFF</button>
        </div>
    </div>

    <div class="card">
        <div class="card-header">Temperature & Environment</div>
        <div class="card-body">
            CPU Temperature: <span id="cpu_temperature"></span><br>
            RP1 ADC Temperature: <span id="rp1_adc_temperature"></span><br>
            <h5>Temperature (C)</h5>
            <p>Current Temperature: <span id="actual-temperature"></span></p>
            <canvas id="temperatureChart" width="400" height="100"></canvas><br>
            <h5>Humidity (%)</h5>
            <p>Current Humidity: <span id="actual-humidity"></span></p>
            <canvas id="humidityChart" width="400" height="100"></canvas><br>
            <h5>eCO2 (ppm)</h5>
            <p>Current eCO2: <span id="actual-eco2"></span></p>
            <canvas id="eco2Chart" width="400" height="100"></canvas><br>
            <h5>TVOC (ppb)</h5>
            <p>Current TVOC: <span id="actual-tvoc"></span></p>
            <canvas id="tvocChart" width="400" height="100"></canvas><br>
        </div>
    </div>

    <button onclick="rebootSystem()" class="btn btn-warning">Reboot System</button>

    <script src="/static/js/script.js"></script>


</body>
</html>
